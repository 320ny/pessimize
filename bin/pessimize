#!/usr/bin/env ruby
require 'pessimize'

unless File.exists? 'Gemfile'
  $stderr.write "error: no Gemfile exists in the current directory, exiting"
  exit 1
end

cmd = "cp Gemfile Gemfile.backup"
puts cmd
system cmd

unless $?.exitstatus == 0
  $stderr.write "error: failed to backup existing Gemfile, exiting"
  exit 2
end

require 'pessimize/main'

Pessimize::Main.new.run
